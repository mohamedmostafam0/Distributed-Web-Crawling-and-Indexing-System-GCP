<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Crawl Initiation</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-gradient-to-br from-indigo-200 to-white min-h-screen flex items-center justify-center p-6"
  >
    <div class="bg-white shadow-xl rounded-2xl p-10 max-w-xl w-full">
      <h1 class="text-3xl font-bold mb-6 text-indigo-600 text-center">
        üåê Initiate Web Crawl
      </h1>

      <form method="post" class="flex flex-col gap-4" id="crawl-form">
        <div id="seed-url-container">
          <label for="seed_url_0" class="block text-gray-700 font-semibold mb-2"
            >Seed URLs:</label
          >
          <div class="flex items-center gap-2 mb-2">
            <input
              type="text"
              id="seed_url_0"
              name="seed_urls[]"
              placeholder="https://example.com"
              class="border-2 border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full"
              required
            />
            <button
              type="button"
              id="add-seed-url"
              class="bg-green-500 hover:bg-green-600 text-white font-semibold py-2 px-3 rounded-full transition duration-200"
            >
              +
            </button>
          </div>
        </div>

        <div>
          <label
            for="depth_limit"
            class="block text-gray-700 font-semibold mb-2"
            >Crawl Depth Limit (optional):</label
          >
          <input
            type="number"
            id="depth_limit"
            name="depth_limit"
            placeholder="e.g., 3"
            class="border-2 border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full"
            min="1"
          />
        </div>

        <div>
          <label
            for="domain_restriction"
            class="block text-gray-700 font-semibold mb-2"
            >Domain Restriction (optional, comma-separated):</label
          >
          <input
            type="text"
            id="domain_restriction"
            name="domain_restriction"
            placeholder="example.com"
            class="border-2 border-gray-300 rounded-lg p-3 text-gray-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 w-full"
          />
        </div>

        <button
          type="submit"
          class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg transition duration-200"
        >
          Start Crawl
        </button>
      </form>

      {% if submitted_data %}
      <div
        class="mt-6 p-4 bg-green-100 border border-green-300 rounded-lg text-green-700"
      >
        <h2 class="font-semibold">Crawl initiated with:</h2>
        <ul>
          <li><strong>Seed URLs:</strong></li>
          <ul>
            {% for url in submitted_data.seed_urls %}
            <li>{{ url }}</li>
            {% endfor %}
          </ul>
          {% if submitted_data.depth_limit %}
          <li>
            <strong>Depth Limit:</strong> {{ submitted_data.depth_limit }}
          </li>
          {% endif %} {% if submitted_data.domain_restriction %}
          <li>
            <strong>Domain Restriction:</strong> {{
            submitted_data.domain_restriction }}
          </li>
          {% endif %}
        </ul>
      </div>
      {% endif %}
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const addSeedUrlButton = document.getElementById("add-seed-url");
        const seedUrlContainer = document.getElementById("seed-url-container");
        let seedUrlCount = 1;

        addSeedUrlButton.addEventListener("click", function () {
          const newDiv = document.createElement("div");
          newDiv.classList.add("flex", "items-center", "gap-2", "mb-2");

          const newLabel = document.createElement("label");
          newLabel.setAttribute("for", `seed_url_${seedUrlCount}`);
          newLabel.classList.add(
            "block",
            "text-gray-700",
            "font-semibold",
            "mb-2",
            "sr-only"
          ); // Added sr-only for accessibility
          newLabel.textContent = "Seed URL:";

          const newInput = document.createElement("input");
          newInput.type = "text";
          newInput.id = `seed_url_${seedUrlCount}`;
          newInput.name = "seed_urls[]";
          // newInput.placeholder = "https://another-example.org";
          newInput.classList.add(
            "border-2",
            "border-gray-300",
            "rounded-lg",
            "p-3",
            "text-gray-700",
            "focus:outline-none",
            "focus:ring-2",
            "focus:ring-indigo-500",
            "w-full"
          );
          newInput.required = true;

          const removeButton = document.createElement("button");
          removeButton.type = "button";
          removeButton.textContent = "-";
          removeButton.classList.add(
            "bg-red-500",
            "hover:bg-red-600",
            "text-white",
            "font-semibold",
            "py-2",
            "px-3",
            "rounded-full",
            "transition",
            "duration-200"
          );
          removeButton.addEventListener("click", function () {
            seedUrlContainer.removeChild(newDiv);
          });

          newDiv.appendChild(newLabel);
          newDiv.appendChild(newInput);
          newDiv.appendChild(removeButton);
          seedUrlContainer.appendChild(newDiv);

          seedUrlCount++;
        });
      });
    </script>
  </body>
</html>
